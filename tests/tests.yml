features:
  - feature:
      id: 0dc3f86b-e44b-4ae6-b258-9e68acf63a25
      subject: "txn: very basic txns file"
      tests:
        errors:
          - error:
              id: 4078aee1-b2e7-40fc-ae82-661d29cbaa74
              name: tests/parser/ex/perr-01.exec
              desc: account with missing indentation
          - error:
              id: 399fb5f8-0f03-4aa7-8f2e-1ae8ab2d6645
              name: tests/parser/ex/perr-03.exec
              desc: missing blank line
        operations:
          - test:
              id: ba71f292-cc3e-406f-991e-8dd82a7cf87c
              name: tests/parser/ok/basic.exec
              descriptions:
                - desc: basic txns file
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: identity

  - feature:
      id: 7e842423-6535-4558-819a-23c06cc416df
      subject: input sharding
      tests:
        errors:
          - error:
              id: 0e2a5c79-0594-4c4f-aa65-b31bff877b53
              name: tests/parser/ex/perr-by-shard-01.exec
              desc: parser error with shard data
          - error:
              id: 90d57e1a-eda6-4856-b757-bfc678ac2a82
              name: tests/cli/ex/TxnException-empty-txns-01.exec
              desc: "cli: missing input txn.dir (empty txn set with glob)"
          - error:
              id: 8722a7e2-04fd-4b32-a259-e16ca882a725
              name: tests/core/ex/TxnException-empty-txns-01.exec
              desc: "conf: missing input txn.dir (by conf)"
        operations:
          - test:
              refid: f6ee1b19-c16d-4219-a9cb-3252a38834ee
              desc: 1E3 input files / txns
          - test:
              refid: 66b32e8b-ce65-4dc1-9108-5ee5cd009cd3
              desc: 1E6 input files / txns
          - test:
              refid: 1d731709-1e85-4fe6-b209-aad46cca5551
              desc: shard with non-matching files
          - test:
              id: tests/core/ok/shard-glob-01.exec
              name: b6dee458-ac8a-461b-a3a3-e598f85d869c
              descriptions:
                - desc: "testing effective glob (it could be something else than *.txn)"
              references:
                - ref: identity
          - test:
              id: 4c62d3a6-da8e-441a-a459-6aca5edceb6a
              name: tests/core/ok/shard-link-01.exec
              descriptions:
                - desc: test shard when target of input.fs.dir is link
              references:
                - ref: identity
          - test:
              id: 31a128f5-d1a2-4d93-beee-6599344ece57
              name: tests/parser/ok/shard-glob.exec
              descriptions:
                - desc: --input.fs.dir, --input.fs.glob
                - desc: sorting (file order and txn order are differnt)
              references:
                - ref: register

  - feature:
      id: 70b1b529-f8f9-4fd7-bede-ea41cd00c02c
      subject: "Perf test 1E3 (1_000) txns."
      tests:
        operations:
          - test:
              id: f6ee1b19-c16d-4219-a9cb-3252a38834ee
              name: perf/perf-1E3.txt
              descriptions:
                - desc: 1E3 tests / generator 0.1.4
              references:
                - ref: balance
                - ref: balance-group

  - feature:
      id: 846cc9e5-aad9-439d-adae-f56609beef5f
      subject: "Perf test 1E6 1_000_000)"
      tests:
        operations:
          - test:
              id: 66b32e8b-ce65-4dc1-9108-5ee5cd009cd3
              name: perf/perf-1E6.txt
              descriptions:
                - desc: 1E6 tests / generator 0.1.4
              references:
                - ref: balance
                - ref: balance-group

### Time, timezones etc.
  - feature:
      id: 9bd4be35-5676-4def-a4ea-f6977287781c
      subject: "txn: date, time, timezone, nano-second resolution"
      tests:
        errors:
          - error:
              desc: "todo: missing parser error tests"
        operations:
          - test:
              refid: 51fad435-682f-42fc-bb66-7d7d5d710042
          - test:
              refid: 2c4566b8-0424-4561-9265-087215c2d243
          - test:
              id: 39902850-63aa-4c88-a9c3-4065da8b181e
              name: tests/parser/ok/par-03.exec
              descriptions:
                - desc: "Sorting based on time (offsets, timezones, etc.)"
                - desc: "YYYY-mm-dd"
                - desc: "YYYY-mm-ddTMM:HH:SS"
                - desc: "YYYY-mm-ddTMM:HH:SSZ"
                - desc: "YYYY-mm-ddTMM:HH:SS+HH:MM"
                - desc: "YYYY-mm-ddTMM:HH:SS-HH:MM"
                - desc: "YYYY-mm-ddTMM:HH:SS.SSSZ"
                - desc: "YYYY-mm-ddTMM:HH:SS.SSS+HH:MM"
                - desc: "YYYY-mm-ddTMM:HH:SS.SSS-HH:MM"
              references:
                - ref: register
                - ref: identity
          - test:
              id: de406118-eb73-4621-9b9b-6e26d512cf05
              name: tests/core/ok/time-nano-01.exec
              descriptions:
                - desc: "Time with nano-second resolution (2007-10-02T13:45:30.123456789)"
              references:
                - ref: register
                - ref: identity
          - test:
              id: 203c42c0-6660-4c0a-b991-e55c86e06da3
              name: tests/core/ok/time-dst-01.exec
              descriptions:
                - desc: "timezone: offset, TS during DST switch (spring/autumn)"
              references:
                - ref: identity
          - test:
              id: 23ee5075-ca27-4f08-876e-e29de77cfc59
              name: tests/core/ok/time-dst-02.exec
              descriptions:
                - desc: "timezone: ZoneId (Europe/Helsinki), TS during DST switch (spring/autumn)"
              references:
                - ref: identity

### conf: timezone
  - feature:
      id: b01b4c9b-ebb9-4e38-b910-fb932374057c
      subject: "conf: timezone"
      tests:
        operations:
          - test:
              id: 51fad435-682f-42fc-bb66-7d7d5d710042
              name: tests/core/ok/time-conf-01.exec
              descriptions:
                - desc: "conf: timezone: offset, txn with winter/summer TS"
              references:
                - ref: identity
          - test:
              id: 2c4566b8-0424-4561-9265-087215c2d243
              name: tests/core/ok/time-conf-02.exec
              descriptions:
                - desc: "conf: timezone: ZoneId (Europe/Helsinki), txn with winter/summer TS"
              references:
                - ref: identity

### conf: basedir
  - feature:
      id: 4d7f9feb-2d2f-4c50-b195-60b024bc9999
      subject: "conf: basedir"
      tests:
        operations:
          - test:
              refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c

### conf: input.txn
  - feature:
      id: b3f82d40-1e18-4457-8050-61759a0c0cac
      subject: "conf: input.fs.dir"
      tests:
        errors:
          - error:
              id: ba7e3b73-c1f7-4a82-832d-c75dc866149b
              name: tests/core/ex/NoSuchFileException-txn.dir-not-found-01.exec
              desc: txn.dir not found by conf
        operations:
          - test:
              refid: 8a046e2a-2bed-4ac3-aa42-1dbc31fd78fd

  - feature:
      id: cf543686-e36f-4f5f-91ed-06498e37c4bb
      subject: "conf: input.fs.glob"
      tests:
        operations:
          - test:
              refid: 8a046e2a-2bed-4ac3-aa42-1dbc31fd78fd

### conf: reporting.
  - feature:
      id: 048dca18-eba8-4875-baa5-524ff8c8f903
      subject: "conf: reporting.reports"
      tests:
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          - test:
              refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c

  - feature:
      id: 57cd42b2-7319-42dd-a0be-809927f66bdd
      subject: "conf: reporting.formats"
      tests:
        operations:
          - test:
              refid: ed89d638-70fa-474c-b88f-be03df6231df
          - test:
              refid: a52914e4-0887-4255-abea-c0b457802f56
          - test:
              refid: 053ca6b0-6be6-4fc1-9dd8-6abc754d98d1
          - test:
              refid: 66692492-2b9f-46c2-8e09-a49573ba0cec
          - test:
              refid: 9fff9c03-c94b-4d67-9180-ac7d22edf0c7

  - feature:
      id: 4f83e4ad-4bc9-46a1-9f1e-b4863e8a2839
      subject: "conf: reporting.accounts"
      tests:
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          - test:
              refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
          - test:
              refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
          - test:
              refid: 7d95bef8-6aaa-4706-a276-d206752d017b
          - test:
              refid: 289df07b-a047-488f-bbe0-4d61cce21421

  - feature:
      id: ebc16b71-b5df-46f7-bba6-e0d9ac37d6ee
      subject: "conf: reporting.console"
      tests:
        operations:
          - test:
              id: 940ed68b-7f1c-41fe-bab9-aefd8cf60b3a
              name: tests/cli/ok/console-on-01.exec
              descriptions:
                - desc: "conf: console on"
                - desc: "validate stdout + stderr"
          - test:
              id: e01a2d45-9977-4089-8a54-e29368b2d5cf
              name: tests/cli/ok/console-on-02.exec
              descriptions:
                - desc: "conf: console off"
                - desc: "validate stdout + stderr"
          - test:
              refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c
              name: tests/parser/ok/basic.exec

### conf: reports.balance
  - feature:
      id: 9f348a4c-7d6d-4c64-8f67-da34b63b916a
      subject: "conf: reports.balance.title"
      tests:
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499

  - feature:
      id: 8aa7e91d-b738-44af-af72-4ef160e1f87f
      subject: "conf: reports.balance.accounts"
      tests:
        operations:
          - test:
              refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a

### conf reports.balance-group
  - feature:
      id: c7e846f8-ba22-47be-9e02-c76badc42a65
      subject: "conf: reports.balance-group.title"
      tests:
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499

  - feature:
      id: 33ba3703-7232-4974-8e5d-23b567413bcd
      subject: "conf: reports.balance-group.accounts"
      tests:
        operations:
          - test:
              refid: 3ec3e091-dc23-455b-963a-4ba66db7223f

  - feature:
      id: 1957610a-5ea2-4582-8114-e6fe87986adf
      subject: "conf: reports.balance-group.group-by"
      tests:
        errors:
          - error:
              refid: 31e0bd80-d4a9-4d93-915d-fa2424aedb84
        operations:
          - test:
              refid: ed89d638-70fa-474c-b88f-be03df6231df
          - test:
              refid: 66692492-2b9f-46c2-8e09-a49573ba0cec
          - test:
              refid: 053ca6b0-6be6-4fc1-9dd8-6abc754d98d1
          - test:
              refid: a52914e4-0887-4255-abea-c0b457802f56
          - test:
              refid: 9fff9c03-c94b-4d67-9180-ac7d22edf0c7

### conf: reports.register
  - feature:
      id: 11eaf2b4-b55c-4bb0-bd63-8de82aed62a9
      subject: "conf: reports.register.title"
      tests:
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499

  - feature:
      id: a65cc023-93e3-4b19-a9aa-9a35f590bea7
      subject: "conf: reports.register.accounts"
      tests:
        operations:
          - test:
              refid: 7d95bef8-6aaa-4706-a276-d206752d017b

### conf: accounts
  - feature:
      id: acfee245-078c-45c6-8a87-e3d47598a3ef
      subject: "conf: accounts.strict"
      tests:
        operations:
          - test:
              refid: a11c536e-ce20-4e2b-8abf-cd8a47cdaf07
              desc: "accounts.strict = true"
          - test:
              id: 8a046e2a-2bed-4ac3-aa42-1dbc31fd78fd
              name: tests/parser/ok/no-cao.exec
              descriptions:
                - desc: missing  / empty CoA
                - desc: "conf: input.fs.dir + glob"
                - desc: "accounts.strict = false"
              references:
                - ref: identity

### Txn components
  - feature:
      id: 5b8e63d4-80f3-4b23-bb99-4f6cc48b18b7
      subject: "txn: code"
      tests:
        errors:
          - error:
              id: fd2e49c0-bb60-4f5b-8ddd-f3745fcc6015
              name: tests/parser/ex/perr-code.exec
              desc: Ensure that code is not over eager in case of txn syntax error
        operations:
          - test:
              id: 8ab8a08b-2348-4c20-8971-b357b2a8b6e1
              name: tests/parser/ok/code-01.exec
              descriptions:
                - desc: plain numbers
                - desc: special chars
                - desc: spaces
                - desc: test by sorting that code is truly detected
              references:
                - ref: register
                - ref: identity

  - feature:
      id: bcf52e63-e70e-4b94-b8f1-7321a6a353e8
      subject: "txn: description"
      tests:
        operations:
          - test:
              id: 641c44ab-0ac3-4247-b16e-a4acea5a78ec
              name: TacklerParserTest
              descriptions:
                - desc: input2Txns(str)
                - desc: latin
                - desc: kanji
          - test:
              id: 2564946b-3afb-4edc-9ee5-3c0f37baa1a1
              name: tests/parser/ok/par-02.exec
              descriptions:
                - desc: plain numbers
                - desc: special chars
                - desc: spaces
                - desc: latin
                - desc: kanji
                - desc: "chars: description"
                - desc: "chars: comments"
              references:
                - ref: register
                - ref: identity

  - feature:
      id: a9324c68-8d86-4bf5-b653-cea0ff1da609
      subject: "txn: meta: UUID"
      tests:
        errors:
          - error:
              id: 4391990c-83f4-4ea2-8c25-78a87beae219
              desc: missing uuid
              name: TacklerParserTest
          - error:
              id: 56042ba1-89ca-48da-a55a-d6fea2946c59
              name: TacklerParserTest
              desc: "invalid uuid 1"
          - error:
              id: 08e6dcf3-29b2-44d7-8fb0-af3fc6d74e0c
              name: TacklerParserTest
              desc: "invalid uuid 2"

        reports:
          registry:
            - test:
                refid: 2564946b-3afb-4edc-9ee5-3c0f37baa1a1
          identity:
            - test:
                refid: 2564946b-3afb-4edc-9ee5-3c0f37baa1a1
        operations:
          - test:
              refid: 39902850-63aa-4c88-a9c3-4065da8b181e
              name: tests/parser/ok/par-03.exec
              desc: txn sorting

  - feature:
      id: db4f2f57-aac8-41d6-997f-489cfaab8345
      subject: "Comments, journal level (not supported)"
      tests:
        errors:
          - error:
              id: a9c742e8-9f9a-42dc-8e09-f1ffe5e6e728
              name: tests/parser/ex/journal-comment-01.exec
              desc: "comment on the last line"
          - error:
              id: 73a17e9d-3a91-4c29-bbc7-bf8c7b1b347e
              name: tests/parser/ex/journal-comment-02.exec
              desc: "comment between txn entries"
          - error:
              id: 132f11c4-facd-4fbc-9550-eafd751a2cd8
              name: tests/parser/ex/journal-comment-03.exec
              desc: "comment on the first line"

  - feature:
      id: 1d7b6ba2-5a63-481f-9c74-527e203e5f4b
      subject: "Comments, txn -level"
      tests:
        operations:
          - test:
              refid: 1d731709-1e85-4fe6-b209-aad46cca5551
          - test:
              id: 5f80093d-6e90-4108-a18c-d76c91cacb55
              name: tests/parser/ok/txn-comments-01.exec
              descriptions:
                - desc: one comment
                - desc: multiple comments
                - desc: "meta data + comments"
              references:
                - ref: identity
                - ref: balance
                - ref: balance-group
                - ref: register

  - feature:
      id: 81149412-4c82-41fb-861c-ab0c224975ce
      subject: "Comments, posting -level"
      tests:
        operations:
          - test:
              id: 6ce68af4-5349-44e0-8fbc-35bebd8ac1ac
              name: PostingTest
          - test:
              refid: 1d731709-1e85-4fe6-b209-aad46cca5551
          - test:
              id: 0f06fe78-83ca-46a9-a5cd-b873ab6be807
              name: tests/parser/ok/post-comments-01.exec
              descriptions:
                - desc: normal posting with comment
                - desc: last_posting with comment
                - desc: normal + last_posting with comment
              references:
                - ref: identity
                - ref: balance
                - ref: balance-group
                - ref: register

  - feature:
      id: a94d4a60-40dc-4ec0-97a3-eeb69399f01b
      subject: "TxnParser: string input"
      tests:
        errors:
          - error:
              id: 52836ff9-94de-4575-bfae-6b5afa971351
              name: TacklerTxnsTest
              desc: Detect unbalanced transaction (str-input)
          - error:
              id: b0d7d5b1-8927-43c4-80c1-bfda9d0b149f
              name: TacklerTxnsTest
              desc: handle long error message (str-input)
          - error:
              id: 6880deae-8cbc-4b36-b148-feb3d4e71137
              name: TacklerTxnsTest
              desc: check TacklerParseError with invalid input (str-input)
        operations:
          - test:
              refid: 641c44ab-0ac3-4247-b16e-a4acea5a78ec
          - test:
              refid: 4391990c-83f4-4ea2-8c25-78a87beae219
          - test:
              refid: 56042ba1-89ca-48da-a55a-d6fea2946c59
          - test:
              refid: 9c836932-718c-491d-8cf0-30e35a0d1533
          - test:
              refid: 4a8f98d6-fb07-46ea-89ea-5ef4e7f4a3f8
          - test:
              refid: d8e4e643-1b1b-46c7-b84c-e6cf04952971
          - test:
              id: b591d5d3-0be8-4264-8ec0-75b464ff86dc
              name: TacklerParserTest
              desc: valid simple input
          - test:
              id: 200aad57-9275-4d16-bdad-2f1c484bcf17
              name: TacklerTxnsTest
              descriptions:
                - desc: Multiple txns
                - desc: Txn sorting

  - feature:
      id: 3f9390d6-3a8c-466b-8548-373696daa912
      subject: "Txn's postings must have zero sum"
      tests:
        errors:
          - error:
              refid: 52836ff9-94de-4575-bfae-6b5afa971351
              desc: Detect unbalanced transaction (Str-input)
          - error:
              id: 178a3269-76e9-4bb4-abcd-62806817573e
              name: tests/cli/ex/TxnException-unbalanced-01.exec
              desc: Detect unbalanced transaction (file-input)

  - feature:
      id: 51e6b270-0a1b-4262-aae0-52ff0b93bdb4
      subject: "txn: amounts (big integer and very small fractional parts)"
      tests:
        reports:
          balance:
            - test:
                refid: 0f862997-95b1-4e06-bc5f-bc170c7594ff
          balance-group:
            - test:
                refid: 0f862997-95b1-4e06-bc5f-bc170c7594ff
          registry:
            - test:
                refid: 0f862997-95b1-4e06-bc5f-bc170c7594ff
          equity:
            - test:
                refid: 0f862997-95b1-4e06-bc5f-bc170c7594ff
          identity:
            - test:
                refid: 0f862997-95b1-4e06-bc5f-bc170c7594ff
        operations:
          - test:
              id: e3c97b66-318c-4396-8857-0cd2c1dfb0d2
              name: PostingTest
          - test:
              id: 0f862997-95b1-4e06-bc5f-bc170c7594ff
              name: tests/reporting/ok/big-01.exec
              descriptions:
                - desc: "reading and output BigDecimals 20 digit, 9 decimals"
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 92780169-2419-4a88-8cf5-84994dbca782
              name: tests/reporting/ok/big-02.exec
              descriptions:
                - desc: "operate with big numbers and small fractions at the same time"
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
                - ref: register
                  formats: txt, json
                - ref: equity
                - ref: identity

          - test:
              id: e242f20d-4b96-4b9b-8eb3-2eb7b6e2dc6b
              name: tests/reporting/ok/bal-zero.exec
              descriptions:
                - desc: "reported amount will be zero, when sub-account sums are not"
                - desc: "register and equity should be empty, because no matching accounts"
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
                - ref: register
                  formats: txt, json
                - ref: equity
                - ref: identity

  - feature:
      id: 9b2dd31d-2818-406b-a0e5-f44598432878
      subject: Postings with zero amount (not allowed)
      tests:
        errors:
          - error:
              id: 42ad9d32-64aa-4fcd-a4ab-1e8521b921e3
              name: PostingTest
          - error:
              id: 71d06779-dce9-4499-b54a-0af85b33ac44
              name: tests/core/ex/TxnException-zero-posting.exec
              desc: "posting with zero amount (by input file)"
          - error:
              id: 144bd8b1-aa94-4454-a490-b0e8fdaddc1e
              name: tests/core/ex/TxnException-zero-posting-01.exec
              desc: "posting with zero amount (by conf & empty dir)"

### Reports
  - feature:
      id: d7fb1eed-211d-42b9-857f-5ee3e08b4666
      subject: "conf: Report selection"
      tests:
        errors:
          - error:
              id: 88ef188c-b8f8-47f0-88b6-7af3577aa133
              name: tests/reporting/ex/ReportException-unknown-type.exec
              desc: "conf: reporting.reports unknown report"
        reports:
          balance:
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          balance-group:
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          registry:
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          identity:
            - test:
                refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c

  - feature:
      id: 346b2cd0-5601-43d6-aa16-436d7ce645a1
      subject: "report: Balance"
      tests:
        operations:
          - test:
              id: e094ee52-1742-4da1-bc54-15662c293a69
              name: tests/accumulator/ok/bal-01.exec
              descriptions:
                - desc: basic balance and balance group
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
          - test:
              id: fb5c09d2-dfbf-41b7-9412-81bcf37f0c76
              name: tests/accumulator/ok/bal-02.exec
              descriptions:
                - desc: todo
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
          - test:
              id: 9220c02f-1b2a-4f7b-9ae5-8dc16bf1f071
              name: tests/accumulator/ok/bal-gap-01.exec
              descriptions:
                - desc: top part of account tree is not part of txns
              references:
                - ref: balance
          - test:
              id: cb7e3f4c-a709-4f0e-9f22-336755dfe6b2
              name: tests/accumulator/ok/bal-gap-02.exec
              descriptions:
                - desc: top and middle accounts of account tree are not part of txns
              references:
                - ref: balance
          - test:
              id: 9e00e09f-8ac4-4fd7-b3c1-e383d711d48c
              name: tests/accumulator/ok/bal-gap-03.exec
              descriptions:
                - desc: two consecutive middle accounts of account tree are not part of txns
              references:
                - ref: balance
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499
              desc: Print balance delta

  - feature:
      id: b0b9fbbc-064b-4102-aa4b-beb2f8871606
      subject: "report: Balance Groups"
      tests:
        errors:
          - error:
              id: 31e0bd80-d4a9-4d93-915d-fa2424aedb84
              name: tests/reporting/ex/GroupByException-unknown-group-by.exec
              desc: Unknown group-by operator
        operations:
          - test:
              refid: c6da0aef-125f-4d33-9780-ffaa9e724499
              desc: Print balance delta
          - test:
              id: 9fff9c03-c94b-4d67-9180-ac7d22edf0c7
              name: tests/reporting/group-by/year.exec
              descriptions:
                - desc: "(conf) group-by: year"
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: a52914e4-0887-4255-abea-c0b457802f56
              name: tests/reporting/group-by/month.exec
              descriptions:
                - desc: group-by month, (conf)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: 053ca6b0-6be6-4fc1-9dd8-6abc754d98d1
              name: tests/reporting/group-by/iso-week.exec
              descriptions:
                - desc: (conf) group-by iso-week
                - desc: over and around difficult years (2009/2010)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: ed89d638-70fa-474c-b88f-be03df6231df
              name: tests/reporting/group-by/date.exec
              descriptions:
                - desc: (conf) group-by date
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: 66692492-2b9f-46c2-8e09-a49573ba0cec
              name: tests/reporting/group-by/iso-week-date.exec
              descriptions:
                - desc: (conf) group-by iso-week-date
                - desc: over and around difficult years (2009/2010)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: 29f80e87-070a-4707-a5f7-770a7731c9ec
              name: tests/reporting/group-by/zoned-year.exec
              descriptions:
                - desc: zoned timestamp
                - desc: "(conf) group-by: year"
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: 94e0bddc-4d1b-4133-992d-e314134d0fcc
              name: tests/reporting/group-by/zoned-month.exec
              descriptions:
                - desc: zoned timestamp
                - desc: group-by month, (conf)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: 8ffe3683-3934-4358-840d-fb00fe8fd788
              name: tests/reporting/group-by/zoned-iso-week.exec
              descriptions:
                - desc: zoned timestamp
                - desc: (conf) group-by iso-week
                - desc: over and around difficult years (2009/2010)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: b5fd85fe-94b1-4ef8-8ab7-e8b22acb4d63
              name: tests/reporting/group-by/zoned-date.exec
              descriptions:
                - desc: (conf) group-by date
                - desc: zoned timestamp
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json
          - test:
              id: c0febfbd-218e-41dd-8c65-a1851b21434e
              name: tests/reporting/group-by/zoned-iso-week-date.exec
              descriptions:
                - desc: zoned timestamp
                - desc: (conf) group-by iso-week-date
                - desc: over and around difficult years (2009/2010)
              references:
                - ref: balance
                  formats: txt, json
                - ref: balance-group
                  formats: txt, json

  - feature:
      id: 3872da6a-e772-41f5-a8f0-4eff24552c0d
      subject: "Report: Equity"
      tests:
        operations:
          - test:
              refid: e094ee52-1742-4da1-bc54-15662c293a69
              desc: basic-01
          - test:
              refid: fb5c09d2-dfbf-41b7-9412-81bcf37f0c76
              desc: basic-02
          - test:
              refid: 9220c02f-1b2a-4f7b-9ae5-8dc16bf1f071
              desc: gap-1
          - test:
              refid: cb7e3f4c-a709-4f0e-9f22-336755dfe6b2
              desc: gap-2
          - test:
              refid: 9e00e09f-8ac4-4fd7-b3c1-e383d711d48c
              desc: gap-3
          - test:
              id: 76da1ba6-b17d-4260-bc2d-7d1dcca54d50
              name: tests/accumulator/ok/eq-uuid-01.exec
              descriptions:
                - desc: "Last txn ts + sorting + (uuid check by 2nd stage register-report)"
                - desc: "feed equity report back to Tackler (txns => Eq => Identity)"
                - desc: account filtering
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 2abde44e-929a-467b-9f57-87c8945451c7
              name: tests/accumulator/ok/eq-zeros.exec
              descriptions:
                - desc: All accounts zero out
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
          - test:
              id: f46b00a3-b4dc-44e0-a8ae-b8039e2a33a7
              name: tests/accumulator/ok/eq-uuid-02.exec
              descriptions:
                - desc: "direct check of txn:uuid in equity report"
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity

  - feature:
      id: c17e7d39-49b9-4681-9dc9-c2693a955fe8
      subject: "report: Register"
      tests:
        reports:
          registry:
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499

  - feature:
      id: 0bac8d81-fa95-4501-be2e-c58a4f95017c
      subject: "report: Identity"
      tests:
        reports:
          registry:
            - test:
                refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c
        operations:
          - test:
              id: 1d731709-1e85-4fe6-b209-aad46cca5551
              name: tests/core/ok/id2id-01.exec
              descriptions:
                - desc: "txns -> identity -> identity"
                - desc: shard with non-matching files
              references:
                - ref: identity

### MISC
  - feature:
      id: 7e8e9aaf-4bd7-4d74-86b0-ddb6d7c54381
      subject: Account filtering with reports
      tests:
        reports:
          balance:
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          balance-group:
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          registry:
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          equity:
            - test:
                refid: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
          identity:
            - test:
                refid: 53f67fea-6307-44ca-9834-7a2f9b71a15a
            - test:
                refid: 3ec3e091-dc23-455b-963a-4ba66db7223f
            - test:
                refid: 7d95bef8-6aaa-4706-a276-d206752d017b
            - test:
                refid: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
            - test:
                refid: 289df07b-a047-488f-bbe0-4d61cce21421
            - test:
                refid: c6da0aef-125f-4d33-9780-ffaa9e724499
        operations:
          - test:
              id: 53f67fea-6307-44ca-9834-7a2f9b71a15a
              name: tests/reporting/ok/bal-acc-01.exec
              descriptions:
                - desc: balance and global filters
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 3ec3e091-dc23-455b-963a-4ba66db7223f
              name: tests/reporting/ok/balgrp-acc-01.exec
              descriptions:
                - desc: balance group and global filters
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 7d95bef8-6aaa-4706-a276-d206752d017b
              name: tests/reporting/ok/register-acc-01.exec
              descriptions:
                - desc: register and global filters
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 29d24d2e-702f-4c27-b5de-82ac88ca68ca
              name: tests/reporting/ok/equity-acc-01.exec
              descriptions:
                - desc: equity and global filters
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: 289df07b-a047-488f-bbe0-4d61cce21421
              name: tests/reporting/ok/rep-02-nothing.exec
              descriptions:
                - desc: Filter out everything
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity
          - test:
              id: c6da0aef-125f-4d33-9780-ffaa9e724499
              name: tests/reporting/ok/rep-01.exec
              descriptions:
                - desc: Use global setting for reports
                - desc: Verify that accounts are not trimmed (e.g. nonsensical " *" start of regex is ok)
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: equity
                - ref: identity

# CLI START
  - feature:
      id: 32f0054b-6c82-42e4-a109-4f624b7e1d4d
      subject: "cli: args: error handling"
      tests:
        errors:
          - error:
              id: 7a20d61f-c1ab-4aaa-993c-73cc39978c6f
              name: tests/cli/ex/ExcessArguments-01.exec
              desc: excessive cli arguments
          - error:
              id: 47485d81-ef64-4a6a-9cd6-5f1e15ac130b
              name: tests/cli/ex/UnknownOption-01.exec
              desc: unknown option
          - error:
              id: f2284891-82da-4efd-a705-9e8f612c88af
              name: tests/cli/ex/ValidationFailure-01.exec
              descriptions:
                - desc: both input and dir
                - desc: both input and glob
                - desc: "input, dir and glob glob"
                - desc: "dir, missing glob"

  - feature:
      id: ddcd813e-7396-43e7-8bfd-76e3dcbe04f0
      subject: "cli: args: cfg file path"
      tests:
        operations:
          - test:
              refid: ba71f292-cc3e-406f-991e-8dd82a7cf87c
              desc: --cfg

  - feature:
      id: 5ec11c1f-ba61-4ca8-8166-1c722ab6a7da
      subject: "cli: args: input file selector"
      tests:
        operations:
          - test:
              refid: 9f0d3896-ce0b-415b-8d96-ad40e5177b45
              desc: --input.file

  - feature:
      id: db7ca808-4eef-44a9-b61e-3811c41b642a
      subject: "cli: args: reporting.reports"
      tests:
        operations:
          - test:
              id: 9f0d3896-ce0b-415b-8d96-ad40e5177b45
              name: tests/  reporting/ok/cli-args-01.exec
              descriptions:
                - desc: --reporting.reports
              references:
                - ref: balance
                - ref: balance-group

  - feature:
      id: 780ed0b3-cbb6-4bfb-82a5-c70ae94e2d15
      subject: "cli: args: reporting.formats"
      tests:
        operations:
          - test:
              refid: 8a7a8c60-aab9-4700-b081-9804c1ec537f
          - test:
              refid: c5493e99-d0f3-49b3-8450-3ae6ef970b10
          - test:
              refid: 0dae7dfd-c816-4a77-afff-a372e1802026

  - feature:
      id: 6b8b9f4a-20e8-45e7-b0ea-1daf99d6589b
      subject: "cli: args: reporting.accounts"
      tests:
        operations:
          - test:
              id: 25d62f31-e420-4c46-8397-664983753c7f
              name: tests/reporting/ok/cli-args-02.exec
              descriptions:
                - desc: --reporting.accounts
              references:
                - ref: balance
                - ref: balance-group

  - feature:
      id: d78b7fec-502e-404e-b5d2-8551f96bcf8c
      subject: "cli: args: reporting.console"
      tests:
        operations:
          - test:
              id: fd250432-9b13-4cdd-83a1-1aedff1593ed
              name: tests/cli/ok/console-03.exec
              descriptions:
                - desc: validate stdout + stderr
                - desc: "conf: console = off, --reporting.console=true"
          - test:
              id: fe7017ec-8c26-463b-bf6f-9c2d3cd83220
              name: tests/reporting/ok/cli-args-04.exec
              descriptions:
                - desc: --reporting.console=true
              references:
                - ref: balance
                - ref: balance-group
                - ref: register
                - ref: identity

  - feature:
      id: ed988446-3e8c-4dd5-a0f4-d02c1a145e2e
      subject: "cli: args: reports and account selector combination"
      tests:
        operations:
          - test:
              id: 3ef0b17b-3e0f-4033-962b-0ca1de8d2ca4
              name: tests/reporting/ok/cli-args-03.exec
              descriptions:
                - desc: "CLI Args: --reporting.reports, --reporting.accounts"
              references:
                - ref: balance
                - ref: balance-group

  - feature:
      id: 4d07602f-c3f2-4a26-9166-3f371e6670d2
      subject: "cli: args: basedir"
      tests:
        operations:
          - test:
              id: cd54250a-8af2-4daa-9d8e-7870b5987da9
              name: tests/cli/ok/unknown-acc-01.exec
              descriptions:
                - desc: --basedir
              references:
                - ref: identity

  - feature:
      id: 7ae035a1-3ebc-43f4-87af-0439e2d3b2e5
      subject: "cli: args: input.fs.dir"
      tests:
        errors:
          - error:
              id: 97c7193f-281f-4103-b5e2-7397433ba79c
              name: tests/cli/ex/NoSuchFileException-txn.dir-not-found-01.exec
              desc: file not found (txn.input.dir)
        operations:
          - test:
              refid: 31a128f5-d1a2-4d93-beee-6599344ece57

  - feature:
      id: 78889e89-065a-4bd0-bcd6-9db2d2d6e8cf
      subject: "cli: args: input.fs.glob"
      tests:
        operations:
          - test:
              refid: 31a128f5-d1a2-4d93-beee-6599344ece57

  - feature:
      id: 58bc821a-b231-4c3d-9a7a-36e57f93147f
      subject: "cli: args: accounts.strict"
      tests:
        operations:
          - test:
              refid: cd54250a-8af2-4daa-9d8e-7870b5987da9

  - feature:
      id: 00e155fe-694e-4e06-b152-25cba438a4a2
      subject: "cli: args: --output"
      tests:
        errors:
          - error:
              id: f04577b6-49b2-460f-92f6-7886a4b49152
              name: tests/cli/ex/NoSuchFileException-output-not-found-01.exec
              desc: output path not found
          - error:
              id: a9a8c149-a584-45e5-b4f1-0f901cfd1831
              name: tests/cli/ok/console-04.exec
              desc: no output, no console (this is WARN at the moment)
        operations:
          - test:
              refid: 25d62f31-e420-4c46-8397-664983753c7f
              name: tests/reporting/ok/cli-args-02.exec
          - test:
              refid: 940ed68b-7f1c-41fe-bab9-aefd8cf60b3a
              name: tests/cli/ok/console-01.exec
### CLI END
